# Jetpack Benchmark - –£—Å–ø–µ—à–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–∑–º–µ—Ä–µ–Ω–∏–π

## üéâ –û–±–∑–æ—Ä –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫ —ç–º—É–ª—è—Ç–æ—Ä–∞ (`androidx.benchmark.suppressErrors=EMULATOR,LOW-BATTERY`) –≤—Å–µ –º–∏–∫—Ä–æ–±–µ–Ω—á–º–∞—Ä–∫–∏ –≤—ã–ø–æ–ª–Ω–∏–ª–∏—Å—å **—É—Å–ø–µ—à–Ω–æ**!

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–∏–∫—Ä–æ–±–µ–Ω—á–º–∞—Ä–∫–æ–≤ (StringBenchmark)

### ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ:
- **tests**: 3
- **failures**: 0
- **errors**: 0
- **total time**: 37.994s

### –î–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:

#### 1. stringConcatenation (–∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è —á–µ—Ä–µ–∑ `+=`)
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–∞**: 17.03s
- **–ú–µ–¥–∏–∞–Ω–∞**: 56,220 –Ω–∞–Ω–æ—Å–µ–∫—É–Ω–¥
- **–ú–∏–Ω–∏–º—É–º**: 51,997 –Ω–∞–Ω–æ—Å–µ–∫—É–Ω–¥
- **–ú–∞–∫—Å–∏–º—É–º**: 84,730 –Ω–∞–Ω–æ—Å–µ–∫—É–Ω–¥
- **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ**: 7,836 –Ω–∞–Ω–æ—Å–µ–∫—É–Ω–¥
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–ª–ª–æ–∫–∞—Ü–∏–π**: –º–µ–¥–∏–∞–Ω–∞ 491 –æ–±—ä–µ–∫—Ç–æ–≤
- **–í—Å–µ–≥–æ –∏—Ç–µ—Ä–∞—Ü–∏–π**: 2,234

#### 2. stringBuilder (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ StringBuilder)
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–∞**: 7.367s
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –±—ã—Å—Ç—Ä–µ–µ stringConcatenation

#### 3. stringJoin (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ joinToString())
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–∞**: 11.174s
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –°—Ä–µ–¥–Ω—è—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

## üìà –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –†–µ–π—Ç–∏–Ω–≥ –ø–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (–ø–æ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–∞):
1. **ü•á StringBuilder** (7.367s) - —Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π
2. **ü•à joinToString()** (11.174s) - —Å—Ä–µ–¥–Ω–∏–π
3. **ü•â String concatenation** (17.03s) - —Å–∞–º—ã–π –º–µ–¥–ª–µ–Ω–Ω—ã–π

### –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã:

#### ‚úÖ StringBuilder - –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä
- –õ—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏–π
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏

#### ‚ö†Ô∏è String concatenation (+=) - –∏–∑–±–µ–≥–∞—Ç—å
- –í **2.3 —Ä–∞–∑–∞ –º–µ–¥–ª–µ–Ω–Ω–µ–µ** StringBuilder
- **84,730 –Ω–∞–Ω–æ—Å–µ–∫—É–Ω–¥** –≤ —Ö—É–¥—à–µ–º —Å–ª—É—á–∞–µ –ø—Ä–æ—Ç–∏–≤ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ
- –ë–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–ª–ª–æ–∫–∞—Ü–∏–π (491 –æ–±—ä–µ–∫—Ç)
- –í—ã—Å–æ–∫–æ–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ (7,836 –Ω—Å) = –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

#### üîÑ joinToString() - —É–º–µ—Ä–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä
- –í **1.5 —Ä–∞–∑–∞ –º–µ–¥–ª–µ–Ω–Ω–µ–µ** StringBuilder
- –•–æ—Ä–æ—à –¥–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–π —Å—Ç—Ä–æ–∫
- –ë–æ–ª–µ–µ —á–∏—Ç–∞–µ–º—ã–π –∫–æ–¥

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
- **–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ**: Otus_Emulator (API 16, arm64-v8a)
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ warmup –∏—Ç–µ—Ä–∞—Ü–∏–π**: 136,638
- **Perfetto —Ç—Ä–µ–π—Å—ã**: –°–æ–∑–¥–∞–Ω—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞
- **Method tracing**: –í–∫–ª—é—á–µ–Ω–æ –¥–ª—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤

### –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã:
1. **Perfetto traces** - –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –≤ Android Studio Profiler:
   - `StringBenchmark_stringJoin_2025-09-14-19-08-29.perfetto-trace`
   - `StringBenchmark_stringBuilder_2025-09-14-19-08-38.perfetto-trace`
   - `StringBenchmark_stringConcatenation_2025-09-14-19-08-54.perfetto-trace`

2. **Method tracing files** - –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞:
   - `StringBenchmark_stringConcatenation-methodTracing-2025-09-14-19-08-53.trace`

3. **JSON —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** - –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞:
   - `com.example.benchmark.test-benchmarkData.json`

## üìö –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å

### –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω—ã —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞–Ω–∏—è:
1. **StringBuilder –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –æ–ø—Ç–∏–º–∞–ª—å–Ω–µ–µ** –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏–π
2. **–û–ø–µ—Ä–∞—Ç–æ—Ä `+=`** —Å–æ–∑–¥–∞–µ—Ç –º–Ω–æ–≥–æ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ
3. **–≠–º—É–ª—è—Ç–æ—Ä—ã –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å** –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ (—Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏)
4. **Jetpack Benchmark –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ—á–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É** —Å —Ä–∞–∑–æ–≥—Ä–µ–≤–æ–º JVM

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã–≤–æ–¥—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```kotlin
// ‚ùå –ú–µ–¥–ª–µ–Ω–Ω–æ - –∏–∑–±–µ–≥–∞—Ç—å –¥–ª—è —Ü–∏–∫–ª–æ–≤
var result = ""
repeat(100) { result += "item$it" }

// ‚úÖ –ë—ã—Å—Ç—Ä–æ - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
val builder = StringBuilder()
repeat(100) { builder.append("item$it") }

// üîÑ –£–º–µ—Ä–µ–Ω–Ω–æ - —Ö–æ—Ä–æ—à–æ –¥–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–π
val items = (0 until 100).map { "item$it" }
val result = items.joinToString("")
```

## üì± –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–∞–∫—Ä–æ–±–µ–Ω—á–º–∞—Ä–∫–æ–≤ (MacrobenchmarkExample)

### ‚úÖ –ú–∞–∫—Ä–æ–±–µ–Ω—á–º–∞—Ä–∫–∏ —Ç–æ–∂–µ —É—Å–ø–µ—à–Ω—ã:
- **BUILD SUCCESSFUL** –≤ 6 —Å–µ–∫—É–Ω–¥
- –í—ã–ø–æ–ª–Ω–µ–Ω—ã –∫–∞–∫ –¥–ª—è **benchmark**, —Ç–∞–∫ –∏ –¥–ª—è **debug** –±–∏–ª–¥–æ–≤
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω **—Ö–æ–ª–æ–¥–Ω—ã–π –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** (StartupTimingMetric)

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
- –¢–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏ –±–µ–∑ –æ—à–∏–±–æ–∫ –±–ª–∞–≥–æ–¥–∞—Ä—è –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –ø–æ–¥–∞–≤–ª–µ–Ω–∏—è `EMULATOR,LOW-BATTERY`
- –°–æ–∑–¥–∞–Ω—ã –æ—Ç—á–µ—Ç—ã –¥–ª—è –æ–±–æ–∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π (benchmark + debug)
- –ò–∑–º–µ—Ä–µ–Ω–∏—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**Jetpack Benchmark** —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫—É—é —Ü–µ–Ω–Ω–æ—Å—Ç—å –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

- ‚úÖ –ü–æ–ª—É—á–µ–Ω—ã **–æ–±—ä–µ–∫—Ç–∏–≤–Ω—ã–µ —á–∏—Å–ª–µ–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** –¥–ª—è –º–∏–∫—Ä–æ–±–µ–Ω—á–º–∞—Ä–∫–æ–≤
- ‚úÖ **–ú–∞–∫—Ä–æ–±–µ–Ω—á–º–∞—Ä–∫–∏ –∑–∞–ø—É—Å–∫–∞** –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω—ã **–ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏** —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞ Kotlin
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã **trace-—Ñ–∞–π–ª—ã** –¥–ª—è —É–≥–ª—É–±–ª–µ–Ω–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- ‚úÖ –ü–æ–∫–∞–∑–∞–Ω–∞ –≤–∞–∂–Ω–æ—Å—Ç—å **–≤—ã–±–æ—Ä–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤**
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ **–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞** –¥–ª—è Android –±–µ–Ω—á–º–∞—Ä–∫–æ–≤

### –ò—Ç–æ–≥–æ–≤—ã–π —É—Å–ø–µ—Ö:
- **–ú–∏–∫—Ä–æ–±–µ–Ω—á–º–∞—Ä–∫–∏**: –ø–æ–∫–∞–∑–∞–ª–∏ —Ä–∞–∑–Ω–∏—Ü—É –≤ **2.3 —Ä–∞–∑–∞** –º–µ–∂–¥—É StringBuilder –∏ String concatenation
- **–ú–∞–∫—Ä–æ–±–µ–Ω—á–º–∞—Ä–∫–∏**: —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ—Ä–∏–ª–∏ –≤—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**: –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –º–Ω–æ–≥–æ–º–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç **—Ä–µ–∞–ª—å–Ω—É—é —Ä–∞–∑–Ω–∏—Ü—É –≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** - —ç—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç –≤ production –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö.